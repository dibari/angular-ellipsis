!function(i){"use strict";i.module("angular-ellipsis",[]).directive("ellipsis",["$timeout","$window",function(i,n){return{restrict:"A",scope:{ngBind:"=",ellipsisAppend:"@",ellipsisAppendClick:"&",ellipsisSymbol:"@"},compile:function(){return function(e,l,t){function s(){if("undefined"!=typeof e.ngBind){var i=e.ngBind.split(" "),n=0,s="undefined"!=typeof t.ellipsisSymbol?t.ellipsisSymbol:"&hellip;",p="undefined"!=typeof e.ellipsisAppend&&""!==e.ellipsisAppend?s+"<span>"+e.ellipsisAppend+"</span>":s;if(t.isTruncated=!1,l.html(e.ngBind),d(l)){var o=i.length,c=l[0].clientHeight;for(l.html(e.ngBind+p);o>n;n++)if(i.pop(),l.html(i.join(" ")+p),l[0].scrollHeight<c||d(l)===!1){t.isTruncated=!0;break}s!=p&&"undefined"!=typeof e.ellipsisAppendClick&&""!==e.ellipsisAppendClick&&l.find("span").bind("click",function(){e.$apply(e.ellipsisAppendClick)})}}}function d(i){return i[0].scrollHeight>i[0].clientHeight}t.lastWindowResizeTime=0,t.lastWindowResizeWidth=0,t.lastWindowResizeHeight=0,t.lastWindowTimeoutEvent=null,t.isTruncated=!1,e.$watch("ngBind",function(){s()}),e.$watch("ellipsisAppend",function(){s()}),angular.element(n).bind("resize",function(){i.cancel(t.lastWindowTimeoutEvent),t.lastWindowTimeoutEvent=i(function(){(t.lastWindowResizeWidth!=window.innerWidth||t.lastWindowResizeHeight!=window.innerHeight)&&s(),t.lastWindowResizeWidth=window.innerWidth,t.lastWindowResizeHeight=window.innerHeight},75)})}}}}])}(angular);